<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>RealTime Report</title>

    <script src="Chart.js"></script>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.1/jquery.mobile-1.3.1.min.css" />
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.3.1/jquery.mobile-1.3.1.min.js"></script>
    <script src="Chart.js"></script>

    <link rel="stylesheet" href="jquery-jvectormap-1.2.2.css" type="text/css" media="screen"/>
    <script src="jquery-jvectormap-1.2.2.min.js"></script>
    <script src="jquery-jvectormap-world-mill-en.js"></script>

    <script src="controller.js"></script>
</head>
<body>
    <div>
        <div>
            <div id="AvailabilityDiv1" style="position:absolute; left:60px; top:5px; width:150px; height:100px; padding-top:10px; padding-bottom:10px; line-height: 15px; text-align:center; background-color:rgb(255, 255, 255);" > 
                <p>Today's Availability</p>              
                <label id="AvailabilityLabel1">99.99</label>
            </div>
            <div id="Div1" style="position:absolute; left:225px; top:5px; width:150px; height:100px; padding-top:10px; padding-bottom:10px; line-height: 15px; text-align:center; background-color:rgb(255, 255, 255);" >
                <p>Exception 8553</p>              
                <label id="AvailabilityLabel2">0</label>
            </div>
            <div id="Div2" style="position:absolute; left:60px; top:130px; width:150px; height:100px; padding-top:10px; padding-bottom:10px; line-height: 15px; text-align:center; background-color:rgb(255, 255, 255);" >
                <p>Exception 8661</p>              
                <label id="AvailabilityLabel3">0</label>
            </div>
            <div id="Div3" style="position:absolute; left:225px; top:130px; width:150px; height:100px; padding-top:10px; padding-bottom:10px; line-height: 15px; text-align:center; background-color:rgb(255, 255, 255);" >
                <p>Exception 7261</p>              
                <label id="AvailabilityLabel4">0</label>
            </div>
        </div>

        <div>
            <div id="Div4" style="position:absolute; left:490px; top:5px; width:150px; height:100px; padding-top:10px; padding-bottom:10px; line-height: 15px; text-align:center; background-color:rgb(255, 255, 255);" >
                <p>MailboxUsage</p>
                <label id="MbxUsageUsageLabel">0</label>
            </div>
            <div id="Div5" style="position:absolute; left:655px; top:5px; width:150px; height:100px; padding-top:10px; padding-bottom:10px; line-height: 15px; text-align:center; background-color:rgb(255, 255, 255);" >
                <p>MailboxUsage's DM</p>
                <label id="MbxUsageDMLabel">99.9</label>
            </div>
            <div id="Div6" style="position:absolute; left:490px; top:130px; width:150px; height:100px; padding-top:10px; padding-bottom:10px; line-height: 15px; text-align:center; background-color:rgb(255, 255, 255);" >
                <p>CBCTDaily</p>
                <label id="ConnectionByClientTypeUsageLabel">0</label>
            </div>
            <div id="Div7" style="position:absolute; left:655px; top:130px; width:150px; height:100px; padding-top:10px; padding-bottom:10px; line-height: 15px; text-align:center; background-color:rgb(255, 255, 255);" >
                <p>CBCTDaily's DM</p>
                <label id="ConnectionByClientTypeDMLabel">99.1</label>
            </div>
        </div>

        <div id="chartdiv" style="position:absolute; top:260px">
            <canvas id="tagIDChart" width="400" height="200"></canvas>
        
            <canvas id="barChart" width="400" height="200" style="position:relative; left:30px"></canvas>
        </div>

        <div style="position:absolute; left:850px; top:10px">
            <textarea id="tenantsArea" rows="200" cols="20" style="text-align:center; resize: none; height:500px" readonly="readonly" ></textarea>
        </div>

        <div id="world-map" style="width:800px; height:200px; position:absolute; left:10px; top:460px">
        </div>
    </div>

    <script>
        $(document).ready(function () {
           $('#world-map').vectorMap({
                map: 'world_mill_en',
                series: {
                    regions: [{
                        values: cnData,
                        scale: ['#C8EEFF', '#0071A4'],
                        normalizeFunction: 'polynomial'
                    }]
                },
                onRegionLabelShow: function (e, el, code) {
                    el.html(el.html() + ' (GDP - ' + cnData[code] + ')');
                }
            });
            mapObject = $('#world-map').vectorMap('get', 'mapObject');

            LoadAndRefreshAvailabilityChart();
            LoadAndRefreshDMChart();
            LoadAndRefreshPagesDiv();
            LoadAndRefreshTenants();
            LoadAndRefreshMap();
            setInterval("refreshLineChart()", 15000);
            setInterval("refreshBarChart()", 15000);
            setInterval("LoadAndRefreshPagesDiv()", 15000);
            setInterval("LoadAndRefreshTenants()", 10000);
            setInterval("LoadAndRefreshMap()", 15000);
        });
        function refreshLineChart()
        {
            //document.getElementById("chartdiv").style = "margin-top:100px;";
            document.getElementById("tagIDChart").width = "400";
            document.getElementById("tagIDChart").height = "200";
            LoadAndRefreshAvailabilityChart();
        }

        function refreshBarChart() {
            //document.getElementById("chartdiv").style = "margin-top:100px;";
            document.getElementById("barChart").width = "400";
            document.getElementById("barChart").height = "200";
            LoadAndRefreshDMChart();
        }
    </script>
</body>
</html>
